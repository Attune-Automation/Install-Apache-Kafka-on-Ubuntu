
<!doctype html>
<html lang="en">




<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="title"
          content="Instructions: How to Install Apache Kafka on Ubuntu 20.04 - Attune Automation">
    <meta name="description"
          content="This instruction aims to take you on a journey of installing, configuring, 
and hardening Apache Kafka.

Apache Kafka is a widely adopted distributed message broker specifically 
designed to handle large amounts of real-time data. Its scalability and fault 
tolerance make it a preferred choice for b">
    <meta name="robots"
          content="follow, index, max-snippet:-1, max-video-preview:-1, max-image-preview:large">

    <meta property="og:locale" content="en_AU" />
    <meta property="og:type" content="article" />
    <meta property="og:title"
          content="Instructions: HowTo Install Apache Kafka on Ubuntu 20.04 - Attune Automation" />
    <meta property="og:description" content="This instruction aims to take you on a journey of installing, configuring, 
and hardening Apache Kafka.

Apache Kafka is a widely adopted distributed message broker specifically 
designed to handle large amounts of real-time data. Its scalability and fault 
tolerance make it a preferred choice for b" />
    <meta property="og:site_name" content="Attune Automation" />
    <meta property="article:section" content="IT Instruction" />

    <meta name="twitter:title"
          content="Instructions: How to Install Apache Kafka on Ubuntu 20.04 - Attune Automation" />
    <meta name="twitter:description" content="This instruction aims to take you on a journey of installing, configuring, 
and hardening Apache Kafka.

Apache Kafka is a widely adopted distributed message broker specifically 
designed to handle large amounts of real-time data. Its scalability and fault 
tolerance make it a preferred choice for b" />

    <link rel="icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-32x32.png" sizes="32x32">
    <link rel="icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-192x192.png" sizes="192x192">
    <link rel="apple-touch-icon" href="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-180x180.png">
    <meta name="msapplication-TileImage" content="https://www.servertribe.com/wp-content/uploads/2020/10/cropped-server_tribe_favicon-270x270.png">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="stylesheet" href="../styles/style.css">

    <title>How to Install Apache Kafka on Ubuntu 20.04 - Attune Automation</title>
</head>


<body>

<!-- Project breadcrumbs -->

<!-- Project breadcrumbs -->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb m-0">
        <li class="breadcrumb-item" aria-current="page">
            <a
                href="https://www.servertribe.com/"
                target="_blank">
                ServerTribe
            </a>
        </li>
        <li class="breadcrumb-item" aria-current="page">
            <a
                href="https://github.com/attune-Automation/"
                target="_blank">
                Attune Automation Projects
            </a>
        </li>
        <li class="breadcrumb-item">
            <a href="../index.html">
            Install Apache Kafka on Ubuntu
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            Install Apache Kafka on Ubuntu 20.04
        </li>
    </ol>
</nav>

<!-- Blueprint Header -->

<div class="splash">
    <div class="container px-0">
        <!-- Blueprint name and description -->
        <div class="row">
            <div class="col px-0">
                <h1 class="text-left">
                    How to Install Apache Kafka on Ubuntu 20.04
                </h1>
            </div>
        </div>
        <div class="row">
            <div class="col-6 px-0">
                <h6 class="text-left">
                    This documentation is generated by
                    <a href="https://www.servertribe.com/"
                        class="badge badge-primary">
                        Attune
                    </a>
                </h6>
            </div>
            <div class="col-6 align-self-end text-right px-0">
            </div>
        </div>
    </div>
</div>

<div class="documentation">
    <div class="container px-0 pt-0">
        <div class="row">

<!-- Blueprint ToC -->


            <div class="col-lg-2 px-0 pr-1">
                <div class="container px-0 pt-5 sticky-top">
                    <h6><strong>Contents</strong></h6>
                    <h6 class="text-muted">
                        <a href="#description">
                            Description
                        </a>
                    </h6>


    
        

                    <h6 class="text-muted pt-2">
                        <a href="#createauserforkafka">
                            <strong>Step 1 -</strong> Create a User for Kafka
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#downloadandextractthekafkabinaries">
                            <strong>Step 2 -</strong> Download and Extract the Kafka Binaries
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#createandstartservices">
                            <strong>Step 3 -</strong> Create and Start Services
                        </a>
                    </h6>
    
        

                    <h6 class="text-muted pt-2">
                        <a href="#createzookeeperservice">
                            <strong>Step 3.1 -</strong> Create zookeeper Service
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#createkafkaservice">
                            <strong>Step 3.2 -</strong> Create kafka Service
                        </a>
                    </h6>

        

                    <h6 class="text-muted pt-2">
                        <a href="#startkafkaservice">
                            <strong>Step 3.3 -</strong> Start kafka Service
                        </a>
                    </h6>



                </div>
            </div>

<!-- Blueprint Contents -->
            <div class="col-lg-8 pt-5">
                <div class="container">

<!-- Blueprint Description -->
                    <div class="row">
                        <div class="col px-0">
                            <h5 id="description">
                                <a href="#description">
                                    Description
                                </a>
                            </h5>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col px-0">
                            <p class="text-left">
                                <p>This instruction aims to take you on a journey of installing, configuring, 
and hardening Apache Kafka.</p>
<p>Apache Kafka is a widely adopted distributed message broker specifically 
designed to handle large amounts of real-time data. Its scalability and fault 
tolerance make it a preferred choice for building robust systems. In 
comparison to other message brokers such as ActiveMQ and RabbitMQ, Kafka 
stands out with its remarkable throughput capabilities. While its primary 
usage revolves around publish/subscribe messaging, it is also extensively 
utilised for log aggregation due to its ability to persistently store 
published messages.</p>
<p>In a publish/subscribe messaging system, one or more producers can publish 
messages without having to worry about the number of consumers or their 
specific message processing methods. Subscribed clients automatically 
receive notifications about updates and the arrival of new messages. This 
approach proves to be more efficient and scalable compared to systems where 
clients need to poll at regular intervals to check for the availability of 
new messages.</p>
<p>To successfully follow these instructions, you will need an Ubuntu 20.04 
server equipped with a minimum of 4 GB of RAM. Additionally, ensure that you 
have a non-root user configured with <code>sudo</code> privileges.</p>
<p>Another prerequisite is the installation of OpenJDK 11 on your server. You 
can easily accomplish this by following our instructions on 
<a href="https://www.attuneautomation.com/Install-Java-on-Ubuntu/">Installing Java on Ubuntu</a>
.</p>
                            </p>
                        </div>
                    </div>


        <div class=>
            <div class="jumbotron">
                <h2 class="display-3 text-center">
                    Automate this Instruction
                </h2>
                <p class="lead text-center">
                    Use the Attune GUI for your Scripts
                </p>
                <p class="lead">
                    <ol>
                        <a href="https://www.servertribe.com/download-attune-registration/"
                            target="_blank">
                            <span class="badge badge-primary">1</span>
                            Download Attune
                            <i class="fa-solid fa-download fa-beat-fade" style="color: #0197ff;"></i>
                        </a>
                    </ol>
                    <ol>
                        <a href="https://github.com/attune-Automation/"
                            target="_blank">
                            <span class="badge badge-primary">2</span>
                             Copy the Attune Project URL
                             <i class="fa-brands fa-github fa-fade"></i>
                        </a>
                    </ol>
                    <ol>
                        <a href="https://servertribe-attune.readthedocs.io/en/latest/howto/design_workspace/clone_project.html"
                            target="_blank">
                            <span class="badge badge-primary">3</span>
                            Clone the Project in Attune
                             <i class="fa-solid fa-book fa-fade" style="color: #0197ff;"></i>
                        </a>
                    </ol>
                    <ol>
                        <a href="https://www.youtube.com/watch?v=GCWDI29rDV0"
                            target="_blank">
                            <span class="badge badge-primary">4</span>
                            Plan your Job(s)
                            <i class="fa-brands fa-youtube fa-fade" style="color: #0197ff;"></i>
                        </a>
                    </ol>
                    <ol>
                        <a href="https://www.youtube.com/watch?v=b7DhFcURkZg"
                            target="_blank">
                            <span class="badge badge-primary">5</span>
                            Run your Job(s)
                            <i class="fa-brands fa-youtube fa-fade" style="color: #0197ff;"></i>
                        </a>
                    </ol>
                </p>
                <p class="lead text-center">
                    Congratulations, you've automated: Install Apache Kafka on Ubuntu 20.04
                </p>
                <hr class="my-4 text-center">
                <div class="col px-0">
                    <p class="text-center">
                        Get the most out of automation with our get started
                        videos, product demonstrations, and more.
                    </p>
                    <p class="lead text-center">
                        <a class="btn btn-primary btn-lg"
                           href="https://www.servertribe.com/learn/"
                           target="_blank"
                           role="button">
                            Learn Attune Automation
                        </a>
                    </p>
                </div>
            </div>
        </div>

<div class="row">
    <p>The following steps will guide you through the manual process.</p>
</div>

<!-- Blueprint Steps -->


        



                    <div class="row pt-5">
                        <h4 id="createauserforkafka">
                            <a href="#createauserforkafka">
                                <strong>Step 1 -</strong> Create a User for Kafka
                            </a>
                        </h4>
                    </div>

                    <div class="row">
                        <p>
                            <p>To ensure the security of your Ubuntu machine in case of a compromise on the 
Kafka server, it is essential to create a dedicated user specifically for the 
service. This user will be responsible for handling requests over the network. 
Follow the upcoming step to create the dedicated kafka user.</p>
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {sudouser}@{ubuntunode}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
adduser {kafkaUser.user}
adduser {kafkaUser.user} sudo
                </code>
            </pre>
        </div>
    </div>

    <div class="row">
        <p>
            This script may require you to answer the following prompts:
        </p>
    </div>
    <div class="row">
        <table>
            <thead>
                <tr>
                    <th>
                        Prompt
                    </th>
                    <th class="prompts">
                        Answer
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        New password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{kafkaUser.pw}
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Retype new password:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
{kafkaUser.pw}
                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Full Name []:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">

                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Room Number []:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">

                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Work Phone []:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">

                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Home Phone []:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">

                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Other []:
                    </td>
                    <td class="prompts">
                        <code class="language-sql">

                        </code>
                    </td>
                </tr>
                <tr>
                    <td>
                        Is the information correct?
                    </td>
                    <td class="prompts">
                        <code class="language-sql">
Y
                        </code>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>




        



                    <div class="row pt-5">
                        <h4 id="downloadandextractthekafkabinaries">
                            <a href="#downloadandextractthekafkabinaries">
                                <strong>Step 2 -</strong> Download and Extract the Kafka Binaries
                            </a>
                        </h4>
                    </div>

                    <div class="row">
                        <p>
                            <p>Let's proceed with the following steps to download and extract the Kafka 
binaries into dedicated folders within the home directory of your kafka user.</p>
<ol>
<li>First, create a directory called <code>Downloads</code> in <code>/home/kafka</code> to serve as 
the storage location for your downloads.</li>
<li>Utilise the curl command to download the Kafka binaries.</li>
<li>Create a directory named <code>kafka</code> and navigate to this newly created 
directory. This directory will act as the base directory for your Kafka 
installation.</li>
<li>Extract the downloaded archive using the tar command. Ensure that the 
contents of the archive are extracted directly into <code>~/kafka/</code> by specifying 
the <code>--strip 1</code> flag.</li>
</ol>
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {kafkauser}@{ubuntunode}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
mkdir ~/Downloads
curl &quot;{kafkaBinariesUrl}&quot; -o ~/Downloads/kafka.tgz
mkdir ~/kafka &amp;&amp; cd ~/kafka
tar -xvzf ~/Downloads/kafka.tgz --strip 1
                </code>
            </pre>
        </div>
    </div>





        



                    <div class="row pt-5">
                        <h3 id="createandstartservices">
                            <a href="#createandstartservices">
                                <strong>Step 3 -</strong> Create and Start Services
                            </a>
                        </h3>
                    </div>

                    <div class="row">
                        <p>
                            <p>To enable common service actions for Kafka, such as starting, stopping, and 
restarting, it is necessary to create systemd unit files. These files ensure 
that Kafka operates consistently with other Linux services.</p>
<p>Zookeeper plays a crucial role in managing the cluster state and 
configurations for Kafka. It is a widely used tool in various distributed 
systems, and you can find detailed information about it in the official 
Zookeeper documentation. For this purpose, you will utilize Zookeeper as 
a service with the created unit files.</p>
                        </p>
                    </div>





    




    



                    <div class="row pt-5">
                        <h4 id="createzookeeperservice">
                            <a href="#createzookeeperservice">
                                <strong>Step 3.1 -</strong> Create zookeeper Service
                            </a>
                        </h4>
                    </div>

                    <div class="row">
                        <p>
                            <p>Create the <code>zookeeper</code> unit file.</p>
<p>In the <code>[Unit]</code> section, it is defined that Zookeeper depends on the 
readiness of networking and the filesystem to initiate.</p>
<p>The <code>[Service]</code> section instructs systemd to utilize the 
<code>zookeeper-server-start.sh</code> and <code>zookeeper-server-stop.sh</code> shell scripts 
for initiating and terminating the service. Additionally, it configures 
Zookeeper to be automatically restarted in case of abnormal termination.</p>
                        </p>
                    </div>










                        <div class="row">
                            <p>
                                Connect via ssh:
                            </p>
                        </div>
                        <div class="row py-1">
                            <code class="language-sql">
ssh {sudouser}@{ubuntunode}
                            </code>
                        </div>



    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cat &lt;&lt; EOF &gt; /etc/systemd/system/zookeeper.service
[Unit]
Requires=network.target remote-fs.target
After=network.target remote-fs.target

[Service]
Type=simple
User=kafka
ExecStart=/home/kafka/kafka/bin/zookeeper-server-start.sh /home/kafka/kafka/config/zookeeper.properties
ExecStop=/home/kafka/kafka/bin/zookeeper-server-stop.sh
Restart=on-abnormal

[Install]
WantedBy=multi-user.target
EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="createkafkaservice">
                            <a href="#createkafkaservice">
                                <strong>Step 3.2 -</strong> Create kafka Service
                            </a>
                        </h4>
                    </div>

                    <div class="row">
                        <p>
                            <p>In the <code>[Unit]</code> section, it is stated that this unit file has a dependency 
on <code>zookeeper.service</code>, ensuring that Zookeeper is automatically started when 
the Kafka service is initiated.</p>
<p>The <code>[Service]</code> section configures systemd to use the 
<code>kafka-server-start.sh</code> and <code>kafka-server-stop.sh</code> shell scripts for 
starting and stopping the Kafka service. It further specifies that if 
Kafka terminates unexpectedly, it should be restarted automatically.</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
cat &lt;&lt; EOF &gt; /etc/systemd/system/kafka.service
[Unit]
Requires=zookeeper.service
After=zookeeper.service

[Service]
Type=simple
User=kafka
ExecStart=/bin/sh -c &#x27;/home/kafka/kafka/bin/kafka-server-start.sh /home/kafka/kafka/config/server.properties &gt; /home/kafka/kafka/kafka.log 2&gt;&amp;1&#x27;
ExecStop=/home/kafka/kafka/bin/kafka-server-stop.sh
Restart=on-abnormal

[Install]
WantedBy=multi-user.target
EOF
                </code>
            </pre>
        </div>
    </div>





    



                    <div class="row pt-5">
                        <h4 id="startkafkaservice">
                            <a href="#startkafkaservice">
                                <strong>Step 3.3 -</strong> Start kafka Service
                            </a>
                        </h4>
                    </div>

                    <div class="row">
                        <p>
                            <p>Start and enable the kafka and zookeeper services.</p>
                        </p>
                    </div>









    


    



    <div class="row">
        <p>
            Execute the following script:
        </p>
    </div>
    <div class="row">
        <div class="col px-0">
            <pre>
                <code class="language-sql py-0">
systemctl start kafka
systemctl enable zookeeper
systemctl enable kafka
systemctl status kafka
                </code>
            </pre>
        </div>
    </div>







                    <div class="row pt-5">
                        <div class="col">
                            <h3>Completed</h3>
                            <p>
                                You have completed this instruction.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

<!-- Download Attune Ad -->

            <div class="col-lg-2 px-0">
                <div class="container px-0 pt-5 sticky-top">
                    <div class="card border-light mb-3" style="max-width: 18rem;">
                        <div class="card-body attune-ad">
                            <img
                                src="https://www.servertribe.com/wp-content/uploads/2022/06/AttuneLogoV2_powered_by.png"
                                alt="Attune - Powered by ServerTribe"
                                class="img-fluid">
                            <h5 class="card-title mt-3 text-center">
                                Automate this instruction with Attune
                            </h5>
                            <p class="card-text text-justify">
                                Download the Attune Community Edition.
                            </p>
                            <p class="text-center">
                                <a href="https://www.servertribe.com/download-attune-registration/"
                                   class="btn btn-primary mt-3">
                                    Download NOW!!!
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

<!-- Join Discord -->

        <div class="row py-5">
            <div class="jumbotron">
                <h1 class="display-4 text-center">
                    Discuss this Instruction in Discord
                </h1>
                <p class="lead">

                    Join our Discord channel and connect with like-minded
                    individuals who
                    share your passion. Engage in lively discussions, gain
                    valuable insights,
                    and stay updated on the latest trends in our industry. Don't
                    miss out on
                    this opportunity to network, learn, and grow together.
                </p>
                <hr class="my-4 text-center">
                <div class="col px-0">
                    <p class="text-center">
                        Click the link below and become a part of our vibrant
                        community on
                        Discord today!
                    </p>
                    <p class="lead text-center">
                        <a class="btn btn-primary btn-lg"
                           href="https://discord.com/invite/3YpJsagqUn"
                           role="button">
                            Join NOW!!!
                        </a>
                    </p>
                </div>
            </div>
        </div>

    </div>
</div>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

<script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>


</body>
</html>
